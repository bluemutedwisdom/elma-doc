
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Loadbalancing and redundancy Guide &mdash; ELMA 0.2.9 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/flatly/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/my-styles.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="ELMA 0.2.9 documentation" href="../index.html" />
    <link rel="up" title="Manuals" href="index.html" />
    <link rel="next" title="Installation Guide" href="installation/index.html" />
    <link rel="prev" title="Virtualization Guide" href="virtualization.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo_elma.png" alt="Logo" class="img-thumbnail navbar-logo">
          ELMA documentation</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://enterprise-log-management-appliance.org/">Project Home</a></li>
                <li><a href="../genindex.html">Index</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Main Topics <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about.html#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../about.html#ingredients">Ingredients</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about.html#cookbook">Cookbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about.html#menue">Menue</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about.html#details">Details</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../about.html#syslog-evolution">Syslog evolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about.html#next-generation-databases">Next generation databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about.html#common-event-expression-cee-enhanced-syslog">Common Event Expression - CEE enhanced syslog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about.html#our-goal">Our goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about.html#why-not-just-archive-everything-in-elasticsearch">Why not just archive everything in ElasticSearch?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about.html#why-elma">Why ELMA?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about.html#howto-integrate-into-your-existing-logging-and-monitoring-infrasructure">Howto integrate into your existing logging and monitoring infrasructure?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../2do.html">2do</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2do.html#issues">Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2do.html#problems">Problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2do.html#feature-requests">Feature requests</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Manuals</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="requirements.html">Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="requirements.html#basic-knowledge">Basic Knowledge</a></li>
<li class="toctree-l3"><a class="reference internal" href="requirements.html#system-and-hardware-requirements">System and Hardware Requirements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="virtualization.html">Virtualization Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="virtualization.html#virtual-formats">Virtual formats</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Loadbalancing and redundancy Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#distributed-elasticsearch-cluster">Distributed elasticsearch cluster</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation/index.html">Installation Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation/time.html">Hardware (CMOS/BIOS) Clock and System Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/firstboot.html">First Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/index.html#elma-initial-installation">ELMA initial installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/index.html#reset-elma-configuration-parameter-to-factory-defaults">Reset ELMA configuration parameter to factory defaults</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation/index.html#next-installation-steps">Next installation steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="update.html">Patch, Update and Upgrade Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="update.html#requirements-and-recommendations">Requirements and recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="update.html#patches">Patches</a></li>
<li class="toctree-l3"><a class="reference internal" href="update.html#updates">Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="update.html#upgrades">Upgrades</a></li>
<li class="toctree-l3"><a class="reference internal" href="update.html#reconfigure-elma">Reconfigure ELMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="update.html#final-tests">Final Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="update.html#reset-elma-configuration-parameter-to-factory-defaults">Reset ELMA configuration parameter to factory defaults</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configuration/index.html">Configuration Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="configuration/configurationfiles.html">Configuration Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration/index.html#elma">ELMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration/index.html#snmptrap">snmptrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration/index.html#rsyslog">rsyslog</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration/index.html#logstash">logstash</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration/index.html#elasticsearch">ElasticSearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration/index.html#apache2">Apache2</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration/index.html#nagios">Nagios</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration/index.html#kibana">Kibana</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="administration.html">Administration Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="administration.html#basic-knowledge">Basic Knowledge</a></li>
<li class="toctree-l3"><a class="reference internal" href="administration.html#supported-web-browsers">Supported web browsers</a></li>
<li class="toctree-l3"><a class="reference internal" href="administration.html#elma-admin-interfaces">ELMA admin interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="administration.html#elma-user-management">ELMA user management</a></li>
<li class="toctree-l3"><a class="reference internal" href="administration.html#elma-group-and-profile-management">ELMA group and profile management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="operation.html">Operation Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="operation.html#basic-knowledge">Basic Knowledge</a></li>
<li class="toctree-l3"><a class="reference internal" href="operation.html#secure-network-operations">Secure Network Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="operation.html#event-and-trap-generation-for-specific-testing">Event and trap generation for specific testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="operation.html#basic-operations">Basic operations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user.html">User Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user.html#supported-web-browsers">Supported web browsers</a></li>
<li class="toctree-l3"><a class="reference internal" href="user.html#elma-user-interfaces">ELMA user interfaces</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tests/index.html">Performance and compression tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tests/index.html#generation-of-continious-tcp-logging">Generation of continious tcp logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tests/index.html#rsyslog-output-modules">rsyslog output modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tests/index.html#omfile-file-output-module">omfile - File Output Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tests/index.html#omelasticsearch-elasticsearch-output-module">omelasticsearch - ElasticSearch Output Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tests/index.html#comparison">Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tests/index.html#log-space-sizing">Log space sizing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tests/index.html#testbed">Testbed</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#which-web-browsers-are-supported">Which web browsers are supported?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#file-system-sizing-immediately-after-deployment">File System Sizing immediately after deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#increase-disk-space-using-the-yast-partitioner">Increase disk space using the YAST partitioner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#how-do-i-limit-how-much-storage-space-is-used">How do I limit how much storage space is used?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#apache-failing-to-start-after-patching-and-upgrading">Apache failing to start after patching and upgrading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#warning-patch-opensuse-2014-493-1-is-interactive-skipping">Warning: Patch &#8216;openSUSE-2014-493-1&#8217; is interactive, skipping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#searchphaseexecutionexception-failed-to-execute-phase-query-fetch">SearchPhaseExecutionException - Failed to execute phase query_fetch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#elasticsearchexception-java-lang-outofmemoryerror-java-heap-space">ElasticsearchException - java.lang.OutOfMemoryError: Java heap space</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#are-older-opensuse-12-x-appliances-being-supported-in-future">Are older openSUSE 12.x appliances being supported in future?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#howto-upgrade-elma-appliance-to-opensuse-13-1">Howto upgrade ELMA appliance to openSUSE 13.1?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#how-to-forward-syslog-events-from-syslog-ng-to-elma-rsyslogd">How to forward syslog events from syslog-ng to ELMA rsyslogd?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#how-to-forward-syslog-events-from-rsyslogd-to-elma-rsyslogd">How to forward syslog events from rsyslogd to ELMA rsyslogd?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#how-to-enable-compressed-event-forwarding-between-rsyslogd-servers">How to enable compressed event forwarding between rsyslogd servers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#how-to-resolve-original-syslog-sender-ip-to-sender-hostname">How to resolve original syslog sender IP to sender hostname?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#wrong-timpstamp-in-elma-search-gui-is-your-system-time-synchronized-and-up-to-date">Wrong timpstamp in ELMA Search-Gui - Is your system time synchronized and up to date?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#no-events-in-elma-search-gui-till-utc-xxx-have-you-set-system-clock-to-utc">No events in ELMA Search-Gui till UTC+XXX - Have you set system clock to UTC?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#coordinated-universal-time">Coordinated Universal Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#system-time">System time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#rsyslog-timestamp-formatting-timestamp-parsing-problems">Rsyslog timestamp formatting - Timestamp parsing problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#unresolvedaddressexception-have-you-setup-a-static-ip-address">UnresolvedAddressException - Have you setup a static IP address?</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../whitepapers/index.html">Whitepapers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../whitepapers/index.html#regulatory-frameworks">Regulatory frameworks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../whitepapers/index.html#german-publications">German publications</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/git.html">git</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../development/git.html#git-repository">git repository</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../development/curl.html">curl</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../development/curl.html#curl-exit-codes">curl exit codes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../development/nagios.html">Nagios</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../development/nagios.html#nagios-plugins">Nagios plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../development/webdesign.html">Webdesign</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../development/webdesign.html#bootstrap">bootstrap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../development/nomachinenx.html">NoMachineNX</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../development/nomachinenx.html#installation-on-opensuse">Installation on openSUSE</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="virtualization.html" title="Previous Chapter: Virtualization Guide"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Virtualization G...</span>
    </a>
  </li>
  <li>
    <a href="installation/index.html" title="Next Chapter: Installation Guide"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Installation Gui... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><div id="sourcelink">
  <h3>Table Of Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Loadbalancing and redundancy Guide</a><ul>
<li><a class="reference internal" href="#distributed-elasticsearch-cluster">Distributed elasticsearch cluster</a><ul>
<li><a class="reference internal" href="#to-be-reviewed">To be reviewed</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
  <div id="sourcelink">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/manuals/loadbalancing.txt"
        rel="nofollow">Show Source</a></li>
        <li><a href="https://github.com/enterprise-log-management-appliance/elma-doc/edit/master/source/manuals/loadbalancing.rst"
          rel="nofollow">Edit Source on GitHub</a></li>
    </ul>
  </div>
        </div>
      </div>
    <div class="col-md-9">
      <h1><a href="http://enterprise-log-management-appliance.org/" target="_blank"><img alt="Banner" src="../_static/banner_elma.png" ></a></h1>
      &nbsp;
      
  <div class="section" id="loadbalancing-and-redundancy-guide">
<h1>Loadbalancing and redundancy Guide<a class="headerlink" href="#loadbalancing-and-redundancy-guide" title="Permalink to this headline">¶</a></h1>
<p>ELMA allows you to start small, but will grow with your infrastructure
and requirements. It is built to scale horizontally out of the box. As
you need more data store capacity, just add more <strong>distributed</strong> data
nodes, and let the underlying ElsasticSearch cluster reorganize itself
to take advantage of the extra hardware.</p>
<p>ElasticSearch clusters are resilient - they will detect and remove
failed nodes, and reorganize themselves to ensure that your data is safe
and accessible - <strong>High availability</strong>.</p>
<p>This HOWTO explains the communication matrix, loadbalancing and
redundancy concepts inside <a class="reference external" href="../about.html">ELMA
components</a>.</p>
<div class="section" id="distributed-elasticsearch-cluster">
<h2>Distributed elasticsearch cluster<a class="headerlink" href="#distributed-elasticsearch-cluster" title="Permalink to this headline">¶</a></h2>
<p>Here is a simple overview of deploying an distributed ElasticSearch
cluster on multiple ELMA appliances with dedicated roles:</p>
<ul class="simple">
<li>Master (can be an Elasticsearch master, acts as load balancer on the
cluster, doesn&#8217;t store data and can use the http transport)</li>
<li>Slave (a data node, can not be an Elasticsearch master and can not
use the http transport)</li>
<li>Monitor (doesn&#8217;t store data, can not be an Elasticsearch master, hold
plugins and can use the http transport. By default, uses the
paramedic plugin)</li>
</ul>
<p><img alt="image0" src="../_images/syslog-loadbalancing.png" /></p>
<div class="section" id="to-be-reviewed">
<h3>To be reviewed<a class="headerlink" href="#to-be-reviewed" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://wiki.rsyslog.com/index.php/FailoverSyslogServer">http://wiki.rsyslog.com/index.php/FailoverSyslogServer</a></p>
<p>&#8220;A master in elasticsearch is responsible for handling nodes coming and
going and allocation of shards.&#8221; (quoting Shay)</p>
<p>Now here comes my own understanding:</p>
<p>A master may hold data or not. A &#8220;load balancer&#8221; would be a node that
doesn&#8217;t hold data (node.data: false), but has the HTTP transport
enabled. From what I know it doesn&#8217;t need to be a master as well. The
idea is that client apps would send requests to it, and the load
balancer would forward the requests to the nodes having the needed
shards, and also gather the results.</p>
<p>Then, you would have &#8220;load balanced&#8221; nodes, if you will. Those would be
nodes that hold data, but with HTTP transport disabled (http.enabled:
false). They will only be &#8220;workhorses&#8221; and won&#8217;t be bothered with stuff
like HTTP requests for clients or redirecting requests to other data
nodes.</p>
<p>node.master set to true means that node can be elected to become a
master in cluster. node.data set to true means that a node will be
allocated with shards (&#8220;data&#8221;). Setting both to false (or simply setting
node.client to true) will cause the node to act as a client to the
cluster, potentially acting as a load balancer.</p>
<ul>
<li><p class="first"><a class="reference external" href="http://vincentdevillers.blogspot.de/2013/04/how-to-deploy-elasticsearch-cluster.html">http://vincentdevillers.blogspot.de/2013/04/how-to-deploy-elasticsearch-cluster.html</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://www.elasticsearch.org/guide/reference/modules/node.html">http://www.elasticsearch.org/guide/reference/modules/node.html</a></p>
<blockquote>
<div><p>accepted</p>
</div></blockquote>
</li>
</ul>
<p>The master node is the same as any other node in the cluster, except
that it has been elected to be the master.</p>
<p>It is responsible for coordinating any cluster-wide changes, such as as
the addition or removal of a node, creation, deletion or change of state
(ie open/close) of an index, and the allocation of shards to nodes. When
any of these changes occur, the &#8220;cluster state&#8221; is updated by the master
and published to all other nodes in the cluster. It is the only node
that may publish a new cluster state.</p>
<p>The tasks that a master performs are lightweight. Any tasks that deal
with data (eg indexing, searching etc) do not need to involve the
master. If you choose to run the master as a non-data node (ie a node
that acts as master and as a router, but doesn&#8217;t contain any data) then
the master can run happily on a smallish box.</p>
<p>A node is allowed to become a master if it is marked as &#8220;master
eligible&#8221; (which all nodes are by default). If the current master goes
down, a new master will be elected by the cluster.</p>
<p>An important configuration option in your cluster is
minimum_master_nodes. This specifies the number of &#8220;master eligible&#8221;
nodes that a node must be able to see in order to be part of a cluster.
Its purpose is to avoid &#8220;split brain&#8221; ie having the cluster separate
into two clusters, both of which think that they are functioning
correctly.</p>
<p>For instance, if you have 3 nodes, all of which are master eligible, and
set minimum_master_nodes to 1, then if the third node is separated
from the other two it, it still sees one master-eligible node (itself)
and thinks that it can form a cluster by itself.</p>
<p>Instead, set minimum_master_nodes to 2 in this case (number of nodes /
2 + 1), then if the third node separates, it won&#8217;t see enough master
nodes, and thus won&#8217;t form a cluster by itself. It will keep trying to
join the original cluster.</p>
<p>While Elasticsearch tries very hard to choose the correct defaults,
minimum_master_nodes is impossible to guess, as it has no way of
knowing how many nodes you intend to run. This is something you must
configure yourself.</p>
</div>
</div>
</div>


      &nbsp;
    </div>
      
  </div>
</div>
<footer id="footer">
  <div class="container">
    <div class="text-muted footer">
      &copy; Joerg Heinemann 2012-2014 - Provided by <a href="http://enterprise-log-management-appliance.org" target="_blank">http://enterprise-log-management-appliance.org</a>
         - Last updated on Oct 02, 2014.
      <span class="pull-right">
        <a href="#">Back to top</a>
      </span>
    </div>
  </div>
</footer>
  </body>
</html>